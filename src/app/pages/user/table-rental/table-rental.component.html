<div *ngIf="show; else content" class="loading flex-center bg-background mb-2 rounded-md">
  <div class="loading-container">
    <app-loading></app-loading>
  </div>
</div>

<ng-template #content>
  <div class="table-controls">
    <app-table-filter
      [label]="'Buscar usuario'"
      [placeholder]="'Filtro de solicitudes...'"
      [data]="rawData"
      [columns]="columns"
      (filteredData)="onFilteredData($event)"
    ></app-table-filter>

    <app-table-pagination
      [data]="filteredData"
      [pageSizeOptions]="pageSizeOptions"
      (pageData)="onPageData($event)"
    ></app-table-pagination>
  </div>

  <app-table [data]="pagedData" [columns]="columns" [actionsTemplate]="actionButtons"></app-table>
</ng-template>
<ng-template #actionButtons let-row>
  <div class="actions flex-center">
    <app-btn
      *ngIf="row.state === 'req'"
      [variant]="'raised'"
      [color]="'error'"
      [text]="'Cancelar'"
      (click)="cancelRequest(row)"
    ></app-btn>

    <app-btn
      *ngIf="row.state === 'req'"
      [variant]="'raised'"
      [color]="'primary'"
      [text]="'Confirmar'"
      (click)="confirmRequest(row)"
    ></app-btn>

    <app-btn
      *ngIf="row.state === 'con'"
      [variant]="'basic'"
      [color]="'confirm'"
      [text]="'Confirmado'"
    ></app-btn>

    <app-btn
      *ngIf="row.state === 'can'"
      [variant]="'outline'"
      [color]="'error'"
      [text]="'Cancelado'"
    ></app-btn>

    <app-btn
      *ngIf="row.state === 'cancelNow'"
      [variant]="'outline'"
      [color]="'confirm'"
      [text]="'Cancelado con exito!'"
    ></app-btn>
  </div>
</ng-template>
